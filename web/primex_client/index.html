<!doctype html>

<html lang="pt-br">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Mimes Pyramidal Broker v1.0 God Edition</title>
  <meta name="description" content="Um aplicativo de corretagem de ativos.">
  <meta name="author" content="Mimes">

  <meta property="og:title" content="Mimes Pyramidal Broker v1.0 God Edition">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://www.formatafacil.com.br/">
  <meta property="og:description" content="Um aplicativo de corretagem de ativos.">
  <!-- <meta property="og:image" content="image.png"> -->

  <!-- <link rel="icon" href="/favicon.ico"> -->
  <!-- <link rel="icon" href="/favicon.svg" type="image/svg+xml"> -->
  <!-- <link rel="apple-touch-icon" href="/apple-touch-icon.png"> -->

  <!-- <link rel="stylesheet" href="css/styles.css?v=1.0"> -->

  <link rel="stylesheet" href="bootstrap.css">

</head>

<body>

  <div id="app">

    <barra_superior></barra_superior>

    <span v-html="message"></span>

  </div>

  <script src="jquery-3.6.0.js"></script>
  <script src="bootstrap.bundle.js"></script>
  <script src="vue.js"></script>
  <script>

    Vue.component('barra_superior', {
      template: `<header class="p-3 bg-dark text-white">
                  <div class="container">
                    <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
                      <a href="/" class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none">
                        <img src="inferno.svg" class="bi me-2" width="40" height="32" role="img" aria-label="Bootstrap">
                        </img>
                      </a>

                      <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
                        <li><a href="#" class="nav-link px-2 text-secondary">Home</a></li>
                        <li><a href="#" class="nav-link px-2 text-white">Features</a></li>
                        <li><a href="#" class="nav-link px-2 text-white">Pricing</a></li>
                        <li><a href="#" class="nav-link px-2 text-white">FAQs</a></li>
                        <li><a href="#" class="nav-link px-2 text-white">About</a></li>
                      </ul>

                      <form class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3">
                        <input type="search" class="form-control form-control-dark" placeholder="Search..." aria-label="Search">
                      </form>

                      <div class="text-end">
                        <button type="button" class="btn btn-outline-light me-2">Login</button>
                        <button type="button" class="btn btn-warning">Sign-up</button>
                      </div>
                    </div>
                  </div>
                </header>`
    });

    var vueapp = new Vue({
      el: '#app',
      data: {
        message: 'Mimes Pyramidal Broker v1.0 God Edition'
      }
    });

    var ws;

    function inicializar() {

      saida = vueapp.message;

      vueapp.message += "<br>Iniciando conexão WebSockets com o servidor Pytão...";

      ws = new WebSocket('ws://127.0.0.1:9713');

      vueapp.message += "<br>OK<br>Trocando dados...<br>Enviando 'Lucas'";

      ws.onopen = function (evt) {

        // ws.send(JSON.stringify({ ticks: 'R_100' }));

        ws.send("Lucas");
        vueapp.message += "<br>OK<br>Recebendo dados...";

      };

      ws.onmessage = function (msg) {
        // var data = JSON.parse(msg.data);
        // console.log('ticks update: %o', data);
        vueapp.message += "<br>OK<br>Dados recebidos: '" + msg.data + "'";
      };

    }

    inicializar();

  </script>
</body>

</html>